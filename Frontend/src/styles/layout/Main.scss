@use "../core/variables" as var;
@use "../core/mixins" as mix;

.landing {
  min-height: 100vh;
  @include mix.bgMain();
  @include mix.dustTexture(
    $z: 2,
    $opacity: 0.28,
    $size: 1200px,
    $blur: 0.12px,
    $pos: 0 0
  );

  position: relative;
  flex-direction: column;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  gap: 8rem;

  &__overlay {
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;

    &::before {
      content: "";
      position: absolute;
      inset: 0;

      background: radial-gradient(
          520px 360px at 0% 0%,
          rgba(0, 0, 0, 0.95),
          rgba(0, 0, 0, 0.48) 25%,
          rgba(0, 0, 0, 0) 90%
        ),
        radial-gradient(
          520px 360px at 100% 0%,
          rgba(0, 0, 0, 0.95),
          rgba(0, 0, 0, 0.48) 25%,
          rgba(0, 0, 0, 0) 90%
        );

      opacity: 0.95;
    }
  }

  /* Contenedor de focos */
  &__spots {
    position: absolute;
    inset: 0;
    z-index: 3;
    pointer-events: none;
  }
  &__spotWrap {
    position: absolute;
    top: 0;
    width: clamp(140px, 38vw, 220px);
    opacity: 0.95;
    pointer-events: none;
    z-index: 4;

    /* ✅ Halo / haz de luz */
    &::after {
      content: "";
      position: absolute;

      left: 58%;
      top: 58%;

      /* ✅ tamaño del cono */
      width: clamp(320px, 82vw, 900px);
      height: clamp(220px, 55vh, 520px);

      /* ✅ cono de luz real */
      background: conic-gradient(
          from 205deg,
          rgba(255, 230, 170, 0) 0deg,
          rgba(255, 230, 170, 0.4) 16deg,
          rgba(255, 230, 170, 0) 46deg
        ),
        radial-gradient(
          ellipse at 10% 0%,
          rgba(255, 255, 255, 0.22),
          rgba(255, 255, 255, 0) 70%
        );
      /* ✅ suaviza el borde del cono */
      -webkit-mask-image: radial-gradient(
        ellipse at 30% 0%,
        #000 0%,
        #000 45%,
        transparent 78%
      );
      mask-image: radial-gradient(
        ellipse at 30% 0%,
        #000 0%,
        #000 45%,
        transparent 78%
      );

      transform-origin: 0% 0%;
      transform: rotate(12deg);

      opacity: 0.55;
      filter: blur(0.6px);
      mix-blend-mode: screen;
    }
  }

  &__spotWrap--left {
    left: clamp(-55px, -9vw, -18px);
  }

  &__spotWrap--right {
    right: clamp(-55px, -9vw, -18px);
    transform: scaleX(-1);

    &::after {
      left: 58%;
      top: 58%;
      transform: rotate(12deg);
    }
  }

  /*  Foco  */
  &__spot {
    width: 100%;
    height: auto;
    display: block;
  }

  @media (min-width: var.$media_desktop) {
    &__spotWrap {
      width: clamp(200px, 20vw, 320px);
      opacity: 0.95;
      filter: drop-shadow(0 18px 24px rgba(255, 220, 140, 0.25));
    }

    &__spotWrap--left {
      left: clamp(-45px, -5vw, -8px);
    }

    &__spotWrap--right {
      right: clamp(-45px, -5vw, -8px);
    }
  }

  @media (min-width: var.$media_desktop_lg) {
    &__spotWrap {
      width: clamp(240px, 16vw, 380px);
    }
  }
  &__brand {
    position: relative;
    z-index: 4;
    display: grid;
    place-items: center;
    margin-bottom: 0.8rem;
    isolation: isolate;
  }
  &__title {
    position: relative;
    text-align: center;
    font-size: clamp(3rem, 10vw, 6.8rem);
    letter-spacing: 0.05em;
    line-height: 1;
    letter-spacing: 0.3rem;
    isolation: isolate;

    color: var.$color-primary;

    text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.16),
      2px 2px 0 rgba(253, 228, 6, 0.48), 3px 3px 0 rgba(0, 0, 0, 0.22),
      4px 4px 0 rgba(0, 0, 0, 0.24), 5px 5px 0 rgba(0, 0, 0, 0.18),
      0 0 6px rgba(255, 77, 109, 0.55), 0 18px 26px rgba(255, 77, 109, 0.45),
      0 0 14px rgba(255, 77, 109, 0.42), 0 0 28px rgba(255, 77, 109, 0.32),
      0 0 48px rgba(255, 77, 109, 0.22);

    &::after {
      content: attr(data-text);
      position: absolute;
      inset: 0;
      pointer-events: none;

      /* La capa NO debe “pintar” el texto base */
      color: transparent;
      -webkit-text-fill-color: transparent;

      background: linear-gradient(
        120deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0) 46%,
        rgba(245, 245, 245, 0.85) 50%,
        rgba(255, 255, 255, 0) 54%,
        rgba(255, 255, 255, 0) 100%
      );

      background-size: 360% 100%;
      background-position: -260% 0;

      -webkit-background-clip: text;
      background-clip: text;

      mix-blend-mode: screen;
      opacity: 0.68;

      text-shadow: none;

      animation: landingLightSweep 18s linear infinite;
      will-change: background-position;
    }
  }

  &__spark {
    position: absolute;
    pointer-events: none;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;

    /* Esto ayuda a que parezca luz real */
    mix-blend-mode: screen;
    filter: drop-shadow(0 0 10px rgba(255, 230, 170, 0.35));

    opacity: 0;
    transform: scale(0.25);
    will-change: opacity, transform;

    transform-origin: center;
    &--1 {
      width: clamp(34px, 5vw, 60px);
      height: clamp(34px, 5vw, 60px);
      animation: sparklePop1 5.5s steps(1, end) infinite;
    }

    &--2 {
      width: clamp(44px, 6.2vw, 80px);
      height: clamp(44px, 6.2vw, 80px);
      animation: sparklePop2 6.4s steps(1, end) infinite;
      animation-delay: 1.2s;
    }

    &--3 {
      width: clamp(28px, 4.5vw, 52px);
      height: clamp(28px, 4.5vw, 52px);
      animation: sparklePop3 5.2s steps(1, end) infinite;
      animation-delay: 2s;
    }
  }

  &__content {
    position: relative;
    z-index: 4;
    background: rgba(255, 255, 255, 0.429);
    backdrop-filter: blur(6px);
    border-radius: 20px;
    padding: 3rem;
    width: min(90vw, 420px);
    box-shadow: var.$shadow-default;

    display: flex;
    flex-direction: column;
    gap: 2.3rem;

    &::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 100%;
      transform: translateX(-50%);
      width: 120%;
      height: 7rem;
      margin-top: 5rem;
      border-radius: 999px;
      background: radial-gradient(
        closest-side,
        rgba(0, 0, 0, 0.95),
        rgba(0, 0, 0, 0)
      );
      filter: blur(10px);
      opacity: 0.55;
      pointer-events: none;
    }

    @media (min-width: var.$media_desktop) {
      width: 460px;
      padding: 3rem;
      gap: 2.5rem;
    }

    @media (min-width: var.$media_desktop_lg) {
      width: 560px;
      padding: 3.5rem;
      gap: 3rem;
    }

    &--subtitle {
      color: var.$color-accent-1;
      text-shadow: 2px 2px 8px var.$color-primary;
      font-size: 3rem;
      letter-spacing: 1.5px;
      text-align: center;
    }
  }

  &__switch {
    text-align: center;
    cursor: pointer;
    color: var.$color-primary;
    text-shadow: 3px 3px 5px var.$color-text-light;
    font-size: 1.4rem;
    padding-top: 0.8rem;

    &:hover {
      transform: scale(1.1);
      color: var.$color-accent-2;
    }
  }

  .landing__success,
  .landing__welcome {
    text-align: center;
    font-size: 1.8rem;
    color: var.$color-primary;
  }

  &__auth {
    display: flex;
    flex-direction: column;
    gap: 1.6rem;
    align-items: center;

    form {
      width: 100%;
    }
  }
}

@keyframes sparklePop1 {
  0% {
    opacity: 0;
    left: 12%;
    top: 8%;
    transform: scale(0.2) rotate(0deg);
  }
  8% {
    opacity: 1;
    transform: scale(1.15) rotate(6deg);
  }
  14% {
    opacity: 0;
    transform: scale(0.55) rotate(10deg);
  }

  33% {
    opacity: 0;
    left: 58%;
    top: 18%;
    transform: scale(0.2) rotate(0deg);
  }
  41% {
    opacity: 1;
    transform: scale(1.05) rotate(-6deg);
  }
  47% {
    opacity: 0;
    transform: scale(0.55) rotate(-10deg);
  }

  66% {
    opacity: 0;
    left: 32%;
    top: 62%;
    transform: scale(0.2) rotate(0deg);
  }
  74% {
    opacity: 1;
    transform: scale(1.2) rotate(8deg);
  }
  80% {
    opacity: 0;
    transform: scale(0.55) rotate(12deg);
  }

  100% {
    opacity: 0;
  }
}

@keyframes sparklePop2 {
  0% {
    opacity: 0;
    left: 72%;
    top: 10%;
    transform: scale(0.2) rotate(0deg);
  }
  10% {
    opacity: 1;
    transform: scale(1.25) rotate(-10deg);
  }
  16% {
    opacity: 0;
    transform: scale(0.6) rotate(-16deg);
  }

  38% {
    opacity: 0;
    left: 18%;
    top: 42%;
    transform: scale(0.2) rotate(0deg);
  }
  48% {
    opacity: 1;
    transform: scale(1.15) rotate(10deg);
  }
  54% {
    opacity: 0;
    transform: scale(0.6) rotate(16deg);
  }

  74% {
    opacity: 0;
    left: 52%;
    top: 70%;
    transform: scale(0.2) rotate(0deg);
  }
  84% {
    opacity: 1;
    transform: scale(1.3) rotate(-8deg);
  }
  90% {
    opacity: 0;
    transform: scale(0.6) rotate(-12deg);
  }

  100% {
    opacity: 0;
  }
}

@keyframes sparklePop3 {
  0% {
    opacity: 0;
    left: 40%;
    top: 22%;
    transform: scale(0.2) rotate(0deg);
  }
  12% {
    opacity: 1;
    transform: scale(1.05) rotate(12deg);
  }
  18% {
    opacity: 0;
    transform: scale(0.55) rotate(18deg);
  }

  44% {
    opacity: 0;
    left: 84%;
    top: 58%;
    transform: scale(0.2) rotate(0deg);
  }
  56% {
    opacity: 1;
    transform: scale(1.1) rotate(-10deg);
  }
  62% {
    opacity: 0;
    transform: scale(0.55) rotate(-16deg);
  }

  78% {
    opacity: 0;
    left: 16%;
    top: 12%;
    transform: scale(0.2) rotate(0deg);
  }
  90% {
    opacity: 1;
    transform: scale(1.05) rotate(8deg);
  }
  96% {
    opacity: 0;
    transform: scale(0.55) rotate(14deg);
  }

  100% {
    opacity: 0;
  }
}

@keyframes landingLightSweep {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -120% 0;
  }
}

@media (prefers-reduced-motion: reduce) {
  .landing__spark,
  .landing__title::after {
    animation: none !important;
  }

  .landing__title::after {
    opacity: 0.15;
  }
}
